---
layout: base
---

have a nice day!

{% highlight python %}
class Basecamp(object):
    def __init__(self, account, user, password, agent):
        self.account = account
        self.user = user
        self.password = password
        self.basepath = 'https://basecamp.com/{0}/api/v1'.format(self.account)
        self.agent = agent

    def __makeRequest(self, path, method='get', payload=None):
        """Request handler."""

        # TO-DO
        # Implement Etag/If-None-Match headers
        # DELETE responses are quite different

        endpoint = self.basepath + path

        auth = (self.user, self.password)

        headers = {
            'User-Agent': self.agent,
            'Content-Type': 'application/json'
        }

        if payload:
            data = json.dumps(payload)
        else:
            data = payload

        requestMethod = getattr(r, method)

        try:
            request = requestMethod(endpoint, auth=auth, data=data,
                                    headers=headers)
        except r.exceptions.RequestException as e:
            print e
            sys.exit(1)

        if request.status_code in [200, 201, 204, 304]:
            return (True, request.text, request.headers)

        return (False, request.status_code)

{% endhighlight %}